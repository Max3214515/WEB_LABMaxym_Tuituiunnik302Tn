<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лабораторна робота 1.23 - Функції в JavaScript</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Open+Sans:wght@600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            max-width: 850px;
            margin: 0 auto;
            padding: 25px;
            line-height: 1.7;
            color: #333;
            background-color: #f5f7fa;
        }

        h1, h2 {
            color: #1a365d;
            font-family: 'Open Sans', sans-serif;
        }

        h1 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 2.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .task {
            background-color: #ffffff;
            padding: 22px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            border-left: 4px solid #4a6fa5;
        }

        .task h2 {
            margin-top: 0;
            border-bottom: 2px solid #4a6fa5;
            padding-bottom: 8px;
            font-size: 1.4em;
        }

        .task-description {
            margin-bottom: 18px;
            color: #444;
        }

        .solution {
            background-color: #edf2f7;
            padding: 18px;
            border-radius: 6px;
            margin-bottom: 18px;
            border: 1px solid #d2ddec;
        }

        .solution h3 {
            margin-top: 0;
            color: #4a6fa5;
            font-size: 1.2em;
        }

        pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
            tab-size: 4;
        }

        .output {
            background-color: #1a365d;
            color: #ebf8ff;
            padding: 16px;
            border-radius: 6px;
            margin-top: 18px;
            font-family: 'Roboto', sans-serif;
        }

        .output-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #63b3ed;
            font-size: 1.1em;
        }

        .test-inputs {
            margin-top: 18px;
        }

        .test-case {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input {
            padding: 9px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            width: 200px;
            font-family: inherit;
        }

        button {
            padding: 9px 16px;
            background-color: #4a6fa5;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            transition: all 0.2s;
        }

        button:hover {
            background-color: #3a5a80;
            transform: translateY(-1px);
        }

        .back-link {
            display: block;
            margin-top: 35px;
            text-align: center;
            color: #4a6fa5;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1em;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: #2c5282;
            text-decoration: underline;
        }

        table {
            border-collapse: collapse;
            margin: 10px 0;
        }

        td {
            padding: 8px 12px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Лабораторна робота 1.23 - Функції в JavaScript</h1>

    <div id="task-container">
        <!-- Завдання будуть додані через JavaScript -->
    </div>

    <a href="../index.html" class="back-link">← Повернутися на головну сторінку</a>

    <script>
        // Завдання та їх рішення
        const tasks = [
            {
                id: 1,
                title: "Функція для обчислення секунд",
                description: "Створіть функцію seconds, яка приймає числовий параметр total і повертає залишок від ділення цього числа на 60.",
                code: `function seconds(total) {
    return total % 60;
}`,
                testInputs: [
                    { inputs: [125], expectedOutput: "5" },
                    { inputs: [60], expectedOutput: "0" },
                    { inputs: [61], expectedOutput: "1" }
                ],
                solution: function seconds(total) {
                    return total % 60;
                }
            },
            {
                id: 2,
                title: "Функція для обчислення периметра",
                description: "Напишіть функцію perimeter, яка обчислює периметр правильного багатокутника. Перший параметр - довжина сторони (side), другий - кількість сторін (count). Формула: P = n * a.",
                code: `function perimeter(side, count) {
    return side * count;
}`,
                testInputs: [
                    { inputs: [5, 4], expectedOutput: "20" },
                    { inputs: [1, 3], expectedOutput: "3" },
                    { inputs: [2, 6], expectedOutput: "12" }
                ],
                solution: function perimeter(side, count) {
                    return side * count;
                }
            },
            {
                id: 3,
                title: "Функція FizzBuzz",
                description: "Реалізуйте функцію, яка виводить числа від 1 до n (n - ціле число) з такими умовами:<br>- замість чисел, кратних 3, виводить 'fizz'<br>- замість чисел, кратних 5, виводить 'buzz'<br>- замість чисел, кратних 3 та 5, виводить 'fizzbuzz'",
                code: `function fizzBuzz(n) {
    const result = [];
    for (let i = 1; i <= n; i++) {
        if (i % 15 === 0) {
            result.push("fizzbuzz");
        } else if (i % 3 === 0) {
            result.push("fizz");
        } else if (i % 5 === 0) {
            result.push("buzz");
        } else {
            result.push(i);
        }
    }
    return result.join(", ");
}`,
                testInputs: [
                    { inputs: [15], expectedOutput: "1, 2, fizz, 4, buzz, fizz, 7, 8, fizz, buzz, 11, fizz, 13, 14, fizzbuzz" }
                ],
                solution: function fizzBuzz(n) {
                    const result = [];
                    for (let i = 1; i <= n; i++) {
                        if (i % 15 === 0) {
                            result.push("fizzbuzz");
                        } else if (i % 3 === 0) {
                            result.push("fizz");
                        } else if (i % 5 === 0) {
                            result.push("buzz");
                        } else {
                            result.push(i);
                        }
                    }
                    return result.join(", ");
                }
            },
            {
                id: 4,
                title: "Функція для обчислення середнього",
                description: "Створіть функцію calculate, яка приймає три числових параметри та повертає їхнє середнє арифметичне значення.",
                code: `function calculate(a, b, c) {
    return (a + b + c) / 3;
}`,
                testInputs: [
                    { inputs: [10, 20, 30], expectedOutput: "20" },
                    { inputs: [5, 10, 15], expectedOutput: "10" },
                    { inputs: [7, 8, 9], expectedOutput: "8" }
                ],
                solution: function calculate(a, b, c) {
                    return (a + b + c) / 3;
                }
            },
            {
                id: 5,
                title: "Функція перевірки подільності",
                description: "Реалізуйте функцію isDivisible(n, x, y), яка перевіряє, чи ділиться число n на обидва числа x та y. Використайте три різні підходи: з if, з тернарним оператором та без умовних конструкцій.",
                code: `// З використанням if
function isDivisibleWithIf(n, x, y) {
    if (n % x === 0 && n % y === 0) {
        return true;
    }
    return false;
}

// З тернарним оператором
function isDivisibleWithTernary(n, x, y) {
    return (n % x === 0 && n % y === 0) ? true : false;
}

// Без умовних конструкцій
function isDivisible(n, x, y) {
    return !(n % x) && !(n % y);
}`,
                testInputs: [
                    { inputs: [12, 3, 4], expectedOutput: "true" },
                    { inputs: [12, 5, 6], expectedOutput: "false" },
                    { inputs: [100, 5, 10], expectedOutput: "true" }
                ],
                solution: function isDivisible(n, x, y) {
                    return n % x === 0 && n % y === 0;
                }
            },
            {
                id: 6,
                title: "Операції з масивом",
                description: "Створіть функцію, яка генерує масив з N випадкових чисел (1-100) та повертає об'єкт з такими властивостями: максимальне значення, мінімальне значення, сума елементів, середнє арифметичне та непарні числа.",
                code: `function arrayOperations(N) {
    const array = Array.from({length: N}, () => Math.floor(Math.random() * 100) + 1);
    
    const max = Math.max(...array);
    const min = Math.min(...array);
    const sum = array.reduce((a, b) => a + b, 0);
    const average = sum / N;
    const oddNumbers = array.filter(n => n % 2 !== 0);
    
    return { array, max, min, sum, average, oddNumbers };
}`,
                testInputs: [
                    { inputs: [5], expectedOutput: "Перевірте результат" },
                    { inputs: [10], expectedOutput: "Перевірте результат" }
                ],
                solution: function arrayOperations(N) {
                    const array = Array.from({length: N}, () => Math.floor(Math.random() * 100) + 1);
                    
                    const max = Math.max(...array);
                    const min = Math.min(...array);
                    const sum = array.reduce((a, b) => a + b, 0);
                    const average = sum / N;
                    const oddNumbers = array.filter(n => n % 2 !== 0);
                    
                    return { array, max, min, sum, average, oddNumbers };
                }
            },
            {
                id: 7,
                title: "Робота з матрицею",
                description: "Створіть функцію, яка генерує матрицю 5x5 з випадковими числами (-50 до 50) та замінює елементи головної діагоналі: від'ємні на 0, додатні на 1.",
                code: `function matrixDiagonalReplace() {
    const matrix = Array(5).fill().map(() => 
        Array(5).fill().map(() => Math.floor(Math.random() * 101) - 50)
    );
    
    const originalMatrix = matrix.map(row => [...row]);
    
    for (let i = 0; i < 5; i++) {
        matrix[i][i] = matrix[i][i] < 0 ? 0 : matrix[i][i] > 0 ? 1 : matrix[i][i];
    }
    
    return { originalMatrix, modifiedMatrix: matrix };
}`,
                testInputs: [
                    { inputs: [], expectedOutput: "Перевірте результат" }
                ],
                solution: function matrixDiagonalReplace() {
                    const matrix = Array(5).fill().map(() => 
                        Array(5).fill().map(() => Math.floor(Math.random() * 101) - 50)
                    );
                    
                    const originalMatrix = matrix.map(row => [...row]);
                    
                    for (let i = 0; i < 5; i++) {
                        matrix[i][i] = matrix[i][i] < 0 ? 0 : matrix[i][i] > 0 ? 1 : matrix[i][i];
                    }
                    
                    return { originalMatrix, modifiedMatrix: matrix };
                }
            },
            {
                id: 8,
                title: "Арифметичні операції",
                description: "Створіть 4 функції для базових арифметичних операцій (add, sub, mul, div). Функція ділення повинна перевіряти ділення на нуль.",
                code: `function add(a, b) { return a + b; }
function sub(a, b) { return a - b; }
function mul(a, b) { return a * b; }
function div(a, b) { return b === 0 ? "Помилка: Ділення на нуль" : a / b; }

function arithmeticOperations(a, b, operation) {
    switch(operation) {
        case 'add': return add(a, b);
        case 'sub': return sub(a, b);
        case 'mul': return mul(a, b);
        case 'div': return div(a, b);
        default: return "Невідома операція";
    }
}`,
                testInputs: [
                    { inputs: [10, 5, 'add'], expectedOutput: "15" },
                    { inputs: [10, 5, 'sub'], expectedOutput: "5" },
                    { inputs: [10, 5, 'mul'], expectedOutput: "50" },
                    { inputs: [10, 5, 'div'], expectedOutput: "2" },
                    { inputs: [10, 0, 'div'], expectedOutput: "Помилка: Ділення на нуль" }
                ],
                solution: function arithmeticOperations(a, b, operation) {
                    function add(a, b) { return a + b; }
                    function sub(a, b) { return a - b; }
                    function mul(a, b) { return a * b; }
                    function div(a, b) {
                        if (b === 0) {
                            return "Помилка: Ділення на нуль";
                        }
                        return a / b;
                    }
                    
                    let result;
                    
                    switch(operation) {
                        case 'add':
                            result = add(a, b);
                            break;
                        case 'sub':
                            result = sub(a, b);
                            break;
                        case 'mul':
                            result = mul(a, b);
                            break;
                        case 'div':
                            result = div(a, b);
                            break;
                        default:
                            return "Невідома операція";
                    }
                    
                    return result;
                }
            },
            {
                id: 9,
                title: "Аналіз числа",
                description: "Створіть функцію, яка аналізує число: визначає знак, чи є воно простим, та перевіряє подільність на 2, 3, 5, 6, 9.",
                code: `function analyzeNumber(num) {
    const sign = num > 0 ? "позитивне" : num < 0 ? "негативне" : "нуль";
    
    function isPrime(n) {
        if (n <= 1) return false;
        if (n <= 3) return true;
        if (n % 2 === 0 || n % 3 === 0) return false;
        for (let i = 5; i * i <= n; i += 6) {
            if (n % i === 0 || n % (i + 2) === 0) return false;
        }
        return true;
    }
    
    const prime = isPrime(Math.abs(num)) ? "просте" : "не просте";
    const divisibility = {
        "2": num % 2 === 0,
        "3": num % 3 === 0,
        "5": num % 5 === 0,
        "6": num % 6 === 0,
        "9": num % 9 === 0
    };
    
    return { number: num, sign, prime, divisibility };
}`,
                testInputs: [
                    { inputs: [10], expectedOutput: "Перевірте результат" },
                    { inputs: [7], expectedOutput: "Перевірте результат" },
                    { inputs: [-15], expectedOutput: "Перевірте результат" }
                ],
                solution: function analyzeNumber(num) {
                    const sign = num > 0 ? "позитивне" : num < 0 ? "негативне" : "нуль";
                    
                    function isPrime(n) {
                        if (n <= 1) return false;
                        if (n <= 3) return true;
                        if (n % 2 === 0 || n % 3 === 0) return false;
                        for (let i = 5; i * i <= n; i += 6) {
                            if (n % i === 0 || n % (i + 2) === 0) return false;
                        }
                        return true;
                    }
                    
                    const prime = isPrime(Math.abs(num)) ? "просте" : "не просте";
                    const divisibility = {
                        "2": num % 2 === 0,
                        "3": num % 3 === 0,
                        "5": num % 5 === 0,
                        "6": num % 6 === 0,
                        "9": num % 9 === 0
                    };
                    
                    return { number: num, sign, prime, divisibility };
                }
            },
            {
                id: 10,
                title: "Обробка масиву",
                description: "Створіть функцію, яка приймає масив, підносить числові елементи до квадрату та повертає перевернуту копію масиву.",
                code: `function reverseAndSquareNumbers(arr) {
    return arr
        .map(item => typeof item === 'number' ? item * item : item)
        .reverse();
}`,
                testInputs: [
                    { inputs: [[1, 2, "a", 3, "b", 4]], expectedOutput: "[16, 'b', 9, 'a', 4, 1]" },
                    { inputs: [[5, "x", "y", 10]], expectedOutput: "[100, 'y', 'x', 25]" }
                ],
                solution: function reverseAndSquareNumbers(arr) {
                    return arr
                        .map(item => typeof item === 'number' ? item * item : item)
                        .reverse();
                }
            },
            {
                id: 11,
                title: "Видалення дублікатів",
                description: "Створіть функцію, яка видаляє дублікати з масиву, зберігаючи лише унікальні значення.",
                code: `function removeDuplicates(arr) {
    return [...new Set(arr)];
}`,
                testInputs: [
                    { inputs: [[1, 2, 2, 4, 5, 4, 7, 8, 7, 3, 6]], expectedOutput: "1,2,4,5,7,8,3,6" },
                    { inputs: [[10, 20, 30, 10, 40, 20]], expectedOutput: "10,20,30,40" }
                ],
                solution: function removeDuplicates(arr) {
                    return [...new Set(arr)];
                }
            }
        ];

        // Функція для створення UI елементів завдань
        function renderTasks() {
            const taskContainer = document.getElementById('task-container');
            
            tasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task';
                taskElement.id = `task-${task.id}`;
                
                taskElement.innerHTML = `
                    <h2>Завдання ${task.id}: ${task.title}</h2>
                    <div class="task-description">${task.description}</div>
                    
                    <div class="solution">
                        <h3>Рішення:</h3>
                        <pre>${task.code}</pre>
                    </div>
                    
                    <div class="test-inputs">
                        <h3>Перевірка функції:</h3>
                        ${task.testInputs.map((test, index) => `
                            <div class="test-case">
                                <input type="text" id="task-${task.id}-test-${index}" value="${test.inputs.join(', ')}" readonly>
                                <button onclick="runTest(${task.id}, ${index})">Виконати</button>
                                <span id="task-${task.id}-result-${index}"></span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="output" id="output-${task.id}">
                        <div class="output-title">Результат:</div>
                        <div id="output-content-${task.id}"></div>
                    </div>
                `;
                
                taskContainer.appendChild(taskElement);
            });
        }

        // Функція для запуску тестів
        function runTest(taskId, testIndex) {
            const task = tasks.find(t => t.id === taskId);
            const test = task.testInputs[testIndex];
            const result = task.solution(...test.inputs);
            
            const resultElement = document.getElementById(`task-${taskId}-result-${testIndex}`);
            const outputContent = document.getElementById(`output-content-${taskId}`);
            
            if (typeof result === 'object' && result !== null && !Array.isArray(result)) {
                resultElement.textContent = ` → [Об'єкт]`;
            } else if (Array.isArray(result)) {
                resultElement.textContent = ` → [${result.toString().substring(0, 20)}${result.toString().length > 20 ? '...' : ''}]`;
            } else {
                resultElement.textContent = ` → ${result}`;
            }
            
            if (taskId === 6) {
                outputContent.innerHTML = `
                    <p>Вхідні дані: ${test.inputs.join(', ')}</p>
                    <p>Масив: [${result.array.join(', ')}]</p>
                    <p>Максимум: ${result.max}</p>
                    <p>Мінімум: ${result.min}</p>
                    <p>Сума: ${result.sum}</p>
                    <p>Середнє: ${result.average.toFixed(2)}</p>
                    <p>Непарні: [${result.oddNumbers.join(', ')}]</p>
                `;
            } else if (taskId === 7) {
                let originalMatrixHTML = '<table>';
                let modifiedMatrixHTML = '<table>';
                
                for (let i = 0; i < 5; i++) {
                    originalMatrixHTML += '<tr>';
                    modifiedMatrixHTML += '<tr>';
                    
                    for (let j = 0; j < 5; j++) {
                        const isDiagonal = i === j;
                        originalMatrixHTML += `<td${isDiagonal ? ' style="background-color: #e6fffa;"' : ''}>${result.originalMatrix[i][j]}</td>`;
                        modifiedMatrixHTML += `<td${isDiagonal ? ' style="background-color: #e6fffa;"' : ''}>${result.modifiedMatrix[i][j]}</td>`;
                    }
                    
                    originalMatrixHTML += '</tr>';
                    modifiedMatrixHTML += '</tr>';
                }
                
                originalMatrixHTML += '</table>';
                modifiedMatrixHTML += '</table>';
                
                outputContent.innerHTML = `
                    <p>Початкова матриця:</p>
                    ${originalMatrixHTML}
                    <p>Змінена матриця:</p>
                    ${modifiedMatrixHTML}
                `;
            } else if (taskId === 9) {
                const divs = Object.entries(result.divisibility)
                    .map(([num, divides]) => `${num}: ${divides ? 'так' : 'ні'}`)
                    .join('<br>');
                
                outputContent.innerHTML = `
                    <p>Число: ${result.number}</p>
                    <p>Знак: ${result.sign}</p>
                    <p>Просте: ${result.prime}</p>
                    <p>Подільність:</p>
                    ${divs}
                `;
            } else if (taskId === 10 || taskId === 11) {
                outputContent.innerHTML = `
                    <p>Вхідні дані: [${test.inputs[0]}]</p>
                    <p>Результат: [${result}]</p>
                    <p>Очікуваний: [${test.expectedOutput}]</p>
                    <p>Тест ${result.toString() === test.expectedOutput ? 'пройдено ✅' : 'не пройдено ❌'}</p>
                `;
            } else {
                outputContent.innerHTML = `
                    <p>Вхідні дані: ${test.inputs.join(', ')}</p>
                    <p>Результат: ${result}</p>
                    <p>Очікуваний: ${test.expectedOutput}</p>
                    <p>Тест ${result.toString() === test.expectedOutput ? 'пройдено ✅' : 'не пройдено ❌'}</p>
                `;
            }
        }

        // Ініціалізація UI
        window.onload = function() {
            renderTasks();
        };
    </script>
</body>
</html>